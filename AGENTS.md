# Codex 项目协作规范（Web + GitHub Pages）

本文件用于约束 Codex 在本仓库中的默认行为。
所有任务在执行前必须遵循以下规范。

---

## 一、分支与基底规则（强制执行）

### 1. 每次任务开始前必须执行：

- Fetch 最新远端 main 分支
- 确保本地 main 与 origin/main 同步
- 从最新 origin/main 创建新分支

示例流程（逻辑要求）：

1. git fetch origin
2. git checkout main
3. git pull origin main
4. git checkout -b codex/<功能简述> origin/main

禁止：
- 基于旧分支继续开发
- 基于已经合并的 PR 分支继续修改
- 在未同步 main 的情况下直接提交 PR

---

## 二、Pull Request 规范

### 1. PR 必须满足：

- 仅包含当前任务相关改动
- 不包含历史已合并内容
- 分支命名规范：codex/<功能或修复简述>

### 2. PR 信息必须使用中文

PR 内容必须包括：

- 功能或问题描述
- 修改内容说明
- 影响范围说明
- 是否涉及架构变更
- 是否影响部署流程

### 3. Code Review 回复必须使用中文

---

## 三、README 维护规则（强制）

如果本次改动涉及以下情况之一：

- 架构结构变更
- 目录结构调整
- 技术栈变化
- 构建方式变化
- 部署方式变化
- 核心功能设计变更

必须同时更新：

- README.md（中文）
- README_EN.md（英文）

要求：

- 中英文内容必须保持语义一致
- 若无英文文件则需创建 README_EN.md
- 架构说明必须清晰说明变更原因

禁止只更新单一语言版本。

---

## 四、构建与部署规则（GitHub Pages）

本项目为 Web 静态站点，通过 GitHub Pages 自动部署。

### 1. 构建要求

- 必须保证 npm install 成功
- 必须保证 npm run build 成功
- 构建产物必须为静态文件（如 dist/）

### 2. Pages 兼容要求

- 必须考虑仓库名作为 base path
- 禁止硬编码绝对路径
- 资源路径必须适配 Pages 子路径部署

### 3. 不允许随意修改：

- .github/workflows/* 文件
- 部署策略

若必须修改，PR 说明中必须写明原因。

---

## 五、代码质量规范

- 优先保证结构清晰，而非过度抽象
- 模块必须可扩展
- 避免引入不必要依赖
- 所有核心函数必须有说明注释
- 不允许破坏现有功能

---

## 六、任务执行流程

当收到任务时必须：

1. 用中文复述需求
2. 列出修改计划
3. 说明影响文件
4. 同步 main
5. 创建新分支
6. 完成修改
7. 更新 README（如需要）
8. 提交 PR（中文说明）

---

## 七、禁止行为

- 禁止在未同步 main 的情况下直接开发
- 禁止重复包含已合并 PR 内容
- 禁止删除已有工作流文件
- 禁止未经说明修改部署流程
- 禁止使用英文撰写 PR 说明

---

## 八、默认开发环境说明

- 项目为 Web 前端项目
- 使用 GitHub Pages 部署
- 默认 main 为稳定分支
- 所有自动部署依赖 GitHub Actions

---

遵守以上规则执行任务。
